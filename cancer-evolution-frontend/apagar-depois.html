<html>
  <head>
    <title>Mitosis</title>
  </head>
  <body>
    <canvas id="canvas" width="500" height="500"></canvas>
    <script>
      let c = document.getElementById("canvas");
      let ctx = c.getContext("2d");
      let cells = [];
      cells.push(new Cell(100, 100, 5));

      // Definindo a classe de célula
      function Cell(x, y, r) {
        this.x = x;
        this.y = y;
        this.r = r;
        this.color = getRandomColor();
        this.dx = Math.random() * 2 - 1; // Movimento horizontal
        this.dy = Math.random() * 2 - 1; // Movimento vertical
      }

      function getRandomColor() {
        let letters = "0123456789ABCDEF";
        let color = "#";
        for (let i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

      // Função para atualizar a simulação
      function update() {
        move();
        draw();
        if (cells.length < 50) {
          grow();
        }
      }

      setInterval(update, 100);

      // Função para desenhar as células no canvas
      function draw() {
        ctx.clearRect(0, 0, 500, 500); // Limpa o canvas
        for (let i = 0; i < cells.length; i++) {
          ctx.beginPath();
          ctx.arc(cells[i].x, cells[i].y, cells[i].r, 0, 2 * Math.PI);
          ctx.fillStyle = cells[i].color;
          ctx.fill();
          ctx.strokeStyle = "black";
          ctx.lineWidth = 2;
          ctx.stroke();
        }
      }

      // Função para mover as células
      function move() {
        for (let i = 0; i < cells.length; i++) {
          cells[i].x += cells[i].dx;
          cells[i].y += cells[i].dy;

          // Impede as células de saírem da tela
          if (cells[i].x + cells[i].r > 500 || cells[i].x - cells[i].r < 0) {
            cells[i].dx = -cells[i].dx;
          }
          if (cells[i].y + cells[i].r > 500 || cells[i].y - cells[i].r < 0) {
            cells[i].dy = -cells[i].dy;
          }
        }
      }

      // Função para fazer as células crescerem ou se dividirem
      function grow() {
        for (let i = 0; i < cells.length; i++) {
          if (cells[i].r > 15) {
            mitosis(i);
          } else {
            cells[i].r += 0.25; // Cresce até um tamanho específico
          }
        }
      }

      // Função de mitose para dividir as células
      function mitosis(index) {
        if (Math.random() < 0.5) {
          // 50% de chance de dividir
          let cell = cells[index];
          cells.push(new Cell(cell.x, cell.y, 5));
          cells.push(new Cell(cell.x, cell.y, 5));
          cells.splice(index, 1);
        }
      }
    </script>
  </body>
</html>
